<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel del Médico</title>

    <!-- Ruta correcta al CSS -->
    <link rel="stylesheet" href="../static/css/ddoctor-dashboard.css" />

    <!-- Comentarios para Back-End:
         - Insertar dinámicamente: doctorName, doctorId
         - Ejemplo Flask:
           <body data-doctor-id="{{ doctor.id }}">
    -->
  </head>

  <body data-doctor-id="doctor-a">
    <!-- Barra superior con botón de cerrar sesión -->
    <nav class="topbar">
      <h2>Panel del Médico</h2>

      <a href="{{ url_for('logout') }}" class="logout-btn">Cerrar Sesión</a>
    </nav>

    <!-- Sección bienvenida -->
    <header class="header-welcome">
      <p class="sub">
        Bienvenido, <span id="doctorName">{{ doctorName }}</span>
      </p>
      <p class="desc">Gestiona tus pacientes y consultas desde este panel.</p>
    </header>

    <!-- Tarjetas de estadísticas -->
    <section class="stats-grid">
      <!-- Mis Consultas -->
      <div class="card stat-card">
        <div class="icon-box teal">
          <img src="{{ url_for('static', filename='icons/calendar.svg') }}" alt="consultas" />
        </div>
        <p class="label">Mis Consultas</p>
        <p id="myConsultations" class="number">{{ mis_consultas }}</p>
      </div>

      <!-- Mis Pacientes -->
      <div class="card stat-card">
        <div class="icon-box cyan">
          <img src="{{ url_for('static', filename='icons/users.svg') }}" alt="pacientes" />
        </div>
        <p class="label">Pacientes Registrados</p>
        <p id="myPatients" class="number">{{ mis_pacientes }}</p>
      </div>

      <!-- Consultas este mes -->
      <div class="card stat-card">
        <div class="icon-box blue">
          <img src="{{ url_for('static', filename='icons/file.svg') }}" alt="mes" />
        </div>
        <p class="label">Este Mes</p>
        <p id="myConsultationsMonth" class="number">{{ consultas_mes }}</p>
      </div>
    </section>

    <!-- Acciones rápidas -->
    <section class="actions-grid">
      <a href="{{ url_for('register_consultation') }}" class="action-btn">
        <div class="icon-box teal-cyan">
          <img src="{{ url_for('static', filename='icons/plus.svg') }}" alt="nueva consulta" />
        </div>
        <p class="title">Registrar Nueva Consulta</p>
        <p class="desc-small">Crear registro médico</p>
      </a>  

      <a href="{{ url_for('register_patient') }}" class="action-btn">
        <div class="icon-box cyan-blue">
          <img src="{{ url_for('static', filename='icons/users.svg') }}" alt="registrar paciente" />
        </div>
        <p class="title">Registrar Nuevo Paciente</p>
        <p class="desc-small">Añadir paciente</p>
      </a>

      <a href="{{ url_for('historial_pacientes') }}" class="action-btn">
        <div class="icon-box blue-indigo">
          <img src="{{ url_for('static', filename='icons/file.svg') }}" alt="historial" />
        </div>
        <p class="title">Ver Mi Historial</p>
        <p class="desc-small">Mis consultas y pacientes</p>
      </a>
    </section>

    <!-- Consultas recientes -->
    <section class="card recent-box">
      <h3>Consultas Recientes</h3>

      <div id="recentConsultations" class="recent-list">
        {% if consultas_recientes %} {% for consulta in consultas_recientes %}
        <div class="consultation-item">
          <div class="consult-left">
            <h4>{{ consulta.paciente_nombre }}</h4>
            <p>{{ consulta.motivo }}</p>
            <small>{{ consulta.fecha_consulta }}</small>
          </div>
          <div class="consult-right">
            <span class="status {{ consulta.estado }}"
              >{{ consulta.estado }}</span
            >
          </div>
        </div>
        {% endfor %} {% else %}
        <p class="empty">No hay consultas registradas aún</p>
        {% endif %}
      </div>
    </section>

    <script src="../js/ddoctor-dashboard.js"></script>
  </body>
</html>
